pip install kivymd

#:import MDApp kivymd.app.MDApp
#:import MDIconButton kivymd.uix.button.MDIconButton
#:import MDFloatLayout kivymd.uix.floatlayout.MDFloatLayout
#:import MDNavigationLayout kivymd.uix.navigationdrawer.MDNavigationLayout
#:import MDNavigationDrawer kivymd.uix.navigationdrawer.MDNavigationDrawer
#:import MDList kivymd.uix.list.MDList
#:import OneLineIconListItem kivymd.uix.list.OneLineIconListItem
#:import MDTextField kivymd.uix.textfield.MDTextField
#:import MDRaisedButton kivymd.uix.button.MDRaisedButton
#:import ScreenManager kivy.uix.screenmanager.ScreenManager
#:import Screen kivy.uix.screenmanager.Screen

MDNavigationLayout:

    ScreenManager:
        id: screen_manager

        Screen:
            name: "main"

            MDFloatLayout:

                MDIconButton:
                    icon: "menu"
                    pos_hint: {"x": 0, "top": 1}
                    on_release: nav_drawer.set_state("open")

                MDIconButton:
                    icon: "microphone"
                    user_font_size: "72sp"
                    pos_hint: {"center_x": 0.5, "center_y": 0.6}
                    on_release: app.start_recording()

                MDTextField:
                    id: input_text
                    hint_text: "Type a note..."
                    size_hint_x: 0.8
                    pos_hint: {"center_x": 0.5, "y": 0.05}
                    mode: "rectangle"

                MDRaisedButton:
                    text: "Send"
                    pos_hint: {"x": 0.8, "y": 0.05}
                    on_release: app.send_text_note()

        Screen:
            name: "notes"

            BoxLayout:
                orientation: 'vertical'

                MDTextField:
                    id: search_bar
                    hint_text: "Search notes..."
                    size_hint_y: None
                    height: dp(60)
                    on_text: app.filter_notes(self.text)

                MDTabs:
                    id: notes_tabs
                    tab_hint_x: True

                    MDTabsBase:
                        title: "Recent Notes"
                        BoxLayout:
                            orientation: 'vertical'

                            ScrollView:
                                GridLayout:
                                    id: notes_grid
                                    cols: 2
                                    size_hint_y: None
                                    height: self.minimum_height
                                    spacing: dp(10)
                                    padding: dp(10)

                    MDTabsBase:
                        title: "Folders"
                        BoxLayout:
                            orientation: 'vertical'

                            Label:
                                text: "Folder view coming soon..."

BoxLayout:
    id: audio_player
    orientation: "horizontal"
    size_hint_y: None
    height: "60dp"
    padding: dp(10)
    spacing: dp(10)
    opacity: 0  # Hidden by default

    MDIconButton:
        id: audio_play_pause
        icon: "play"
        on_release: app.toggle_audio_playback()

    MDLabel:
        id: audio_time
        text: "0:00 / 0:00"
        size_hint_x: 0.2
        halign: "left"

    Slider:
        id: audio_slider
        min: 0
        max: 100  # Will be updated in Python
        value: 0
        on_touch_up: app.scrub_audio(*args)
        size_hint_x: 0.6

    MDNavigationDrawer:
        id: nav_drawer

        MDList:
            OneLineIconListItem:
                text: "Home"
                on_release:
                    screen_manager.current = "main"
                    nav_drawer.set_state("close")

            OneLineIconListItem:
                text: "Notes"
                on_release:
                    screen_manager.current = "notes"
                    nav_drawer.set_state("close")